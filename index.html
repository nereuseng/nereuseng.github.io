<!DOCTYPE html>












  


<html class="theme-next muse use-motion" lang="zh-TW">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />



  <meta name="google-site-verification" content="Xew4PKOvSabEp8EpsAUGr-B9ZvFIiWDn19BUfYPs6EE" />




















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.3.0" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.3.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.3.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.3.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.3.0" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '6.3.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="這是我記錄我程式能力成長的地方，目前集中在React, JavaScript等，歡迎來交流！">
<meta name="keywords" content="Web,HTML,CSS,JavaScript,hexo,php,heroku,js,react,google,api,心得,教程,分享,mysql,mariadb,教學">
<meta property="og:type" content="website">
<meta property="og:title" content="nereuseng">
<meta property="og:url" content="https://nereuseng.github.io/index.html">
<meta property="og:site_name" content="nereuseng">
<meta property="og:description" content="這是我記錄我程式能力成長的地方，目前集中在React, JavaScript等，歡迎來交流！">
<meta property="og:locale" content="zh-TW">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="nereuseng">
<meta name="twitter:description" content="這是我記錄我程式能力成長的地方，目前集中在React, JavaScript等，歡迎來交流！">






  <link rel="canonical" href="https://nereuseng.github.io/"/>



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>nereuseng</title>
  









  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-TW">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">nereuseng</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">重新出發</p>
      
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切換導航欄">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home menu-item-active">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br />首頁</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">
    <a href="/archives/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />歸檔</a>
  </li>

      
      
    </ul>
  

  
    

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://nereuseng.github.io/2018/11/27/babel-usage/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="nereuseng">
      <meta itemprop="description" content="這是我記錄我程式能力成長的地方，目前集中在React, JavaScript等，歡迎來交流！">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="nereuseng">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/27/babel-usage/" itemprop="url">
                  如何正確的設置babel(Late 2018)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">發表於</span>
              

              
                
              

              <time title="創建時間：2018-11-27 20:44:47" itemprop="dateCreated datePublished" datetime="2018-11-27T20:44:47+08:00">2018-11-27</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新於</span>
                
                <time title="修改時間：2018-12-09 15:42:00" itemprop="dateModified" datetime="2018-12-09T15:42:00+08:00">2018-12-09</time>
              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>之前用 Babel 轉換語法，都是靠框架和 cli轉換，沒試過從頭自己設定。直到最近，接了沒只用原生 Javascript 的小案。身爲 ES6++ 的愛好者，一定要使用 Babel 才能存活啊，最後只好自己從頭研究XD 查了一下，發現很多設定其實已經過時，因此這邊寫一份筆記整理，希望能減少其他人研究的時間。</p>
<h1 id="Babel-做什麼"><a href="#Babel-做什麼" class="headerlink" title="Babel 做什麼"></a>Babel 做什麼</h1><p>Babel 能把比較新的 Javascript (關鍵字: ES6，ES2015 等)，轉換成目前 Browser 能看得懂的 Javascript (ES5)，讓 Developers 能用新語法的同時，不會讓網頁壞掉。</p>
<h1 id="Babel-的-2-種模式"><a href="#Babel-的-2-種模式" class="headerlink" title="Babel 的 2 種模式"></a>Babel 的 2 種模式</h1><ol>
<li>Babel 默認只轉換語法（Syntax）， 像是：<br>a. Arrow function ( () =&gt; {} )<br>b. Spread ( [ …state, isOpen ] )<br>c. Destructing ( const { data } = res )<br>d. Default Parameters ( ( id = NaN ) =&gt; {})</li>
</ol>
<ol>
<li>而自帶的 Api 、原生內置 Methods，需要加上 polyfill 後才能使用，像是：<br>a. Promise<br>b. Symbol<br>c. Array.from<br>d. Object.assign<br>e. fetch</li>
</ol>
<h1 id="1-轉換語法（Syntax）"><a href="#1-轉換語法（Syntax）" class="headerlink" title="1. 轉換語法（Syntax）"></a>1. 轉換語法（Syntax）</h1><p>直接轉換語法是非常方便的，以下放了 Webpack 和 Gulp 的範例。</p>
<h3 id="1-1-Webpack"><a href="#1-1-Webpack" class="headerlink" title="1.1 Webpack"></a>1.1 Webpack</h3><p>Webpack：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -D babel-loader @babel/core @babel/preset-env webpack</span><br></pre></td></tr></table></figure></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// webpack.config.js</span></span><br><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">  rules: [</span><br><span class="line">    &#123;</span><br><span class="line">      test: <span class="regexp">/\.m?js$/</span>,</span><br><span class="line">      exclude: <span class="regexp">/(node_modules|bower_components)/</span>,</span><br><span class="line">      use: &#123;</span><br><span class="line">        loader: <span class="string">'babel-loader'</span>,</span><br><span class="line">        options: &#123;</span><br><span class="line">          presets: [<span class="string">'@babel/preset-env'</span>]</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1-2-Gulp："><a href="#1-2-Gulp：" class="headerlink" title="1.2 Gulp："></a>1.2 Gulp：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev gulp-babel @babel/core @babel/preset-env</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>)</span><br><span class="line"><span class="keyword">const</span> babel = <span class="built_in">require</span>(<span class="string">'gulp-babel'</span>)</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'default'</span>, () =&gt;</span><br><span class="line">  gulp.src(<span class="string">'src/app.js'</span>)</span><br><span class="line">    .pipe(babel(&#123;</span><br><span class="line">        presets: [<span class="string">'@babel/env'</span>]</span><br><span class="line">    &#125;))</span><br><span class="line">    .pipe(gulp.dest(<span class="string">'dist'</span>))</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>想要快的話，可在 Babel 網站的 Try It Out 直接轉換。（似乎沒有比較方便？）</p>
<h1 id="2-Polyfill"><a href="#2-Polyfill" class="headerlink" title="2. Polyfill"></a>2. Polyfill</h1><p>相較於直接轉換 Syntax，Polyfill 才是讓人頭疼的地方。有時候需要支援的 Browser 太舊（eg: IE11），龐大的 Polyfill bundle 拖累了其他不需要 Polyfill 的 Browser。儘量用只需要的 Polyfill 變成是需要優化的目標。</p>
<h3 id="2-1-Polyfill：用Webpack"><a href="#2-1-Polyfill：用Webpack" class="headerlink" title="2.1 Polyfill：用Webpack"></a>2.1 Polyfill：用Webpack</h3><h4 id="2-1-1-entry-加入-babel-polyfill"><a href="#2-1-1-entry-加入-babel-polyfill" class="headerlink" title="2.1.1 entry 加入 @babel/polyfill"></a>2.1.1 entry 加入 @babel/polyfill</h4><p>這是最早期的做法，就是讓 Webpack 也 bundle polyfill的檔案：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// webpack.config.js</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  entry: [<span class="string">"@babel/polyfill"</span>, <span class="string">"./app/js"</span>],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="2-1-2-useBuiltIns"><a href="#2-1-2-useBuiltIns" class="headerlink" title="2.1.2 useBuiltIns"></a>2.1.2 useBuiltIns</h4><p>以前的做法是轉換語法（Syntax）和 Polyfill 是分開設定，現在在設定同一處統一用 useBuiltIns 設定，還有加上target（browserlist）的功能，讓設定方便很多。</p>
<p>useBuiltIns 有三種設定方式：</p>
<ol>
<li>entry</li>
<li>usage</li>
<li>disable（就是不要加 polyfill 咯，就不解釋了）</li>
</ol>
<h5 id="2-1-2-a-useBuiltIns-‘entry’"><a href="#2-1-2-a-useBuiltIns-‘entry’" class="headerlink" title="2.1.2 a.) useBuiltIns : ‘entry’"></a>2.1.2 a.) useBuiltIns : ‘entry’</h5><p>在你的app入口加上這個：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app.js</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'@babel/polyfill'</span></span><br></pre></td></tr></table></figure></p>
<p>根據1.1和2.1.1的基礎做更動：</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">  // webpack.config.js</span><br><span class="line">  module: &#123;</span><br><span class="line"><span class="deletion">-   entry: ["@babel/polyfill", "./app/js"],</span></span><br><span class="line"><span class="addition">+   entry: ["./app/js"],</span></span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: /\.m?js$/,</span><br><span class="line">        exclude: /(node_modules|bower_components)/,</span><br><span class="line">        use: &#123;</span><br><span class="line">          loader: 'babel-loader',</span><br><span class="line">          options: &#123;</span><br><span class="line"><span class="deletion">-           presets: ['@babel/preset-env']</span></span><br><span class="line"><span class="addition">+           presets: [</span></span><br><span class="line"><span class="addition">+               '@babel/preset-env',</span></span><br><span class="line"><span class="addition">+               &#123;</span></span><br><span class="line"><span class="addition">+                 "targets": &#123;</span></span><br><span class="line"><span class="addition">+                   "ie": "11"</span></span><br><span class="line"><span class="addition">+                 &#125;,</span></span><br><span class="line"><span class="addition">+                 "useBuiltIns": "entry"</span></span><br><span class="line"><span class="addition">+               &#125;</span></span><br><span class="line"><span class="addition">+             ]</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h5 id="2-1-2-b-useBuiltIns-‘usage’"><a href="#2-1-2-b-useBuiltIns-‘usage’" class="headerlink" title="2.1.2 b.) useBuiltIns : ‘usage’"></a>2.1.2 b.) useBuiltIns : ‘usage’</h5><p>在app入口拿掉：<br><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// app.js</span><br><span class="line"><span class="deletion">- import '@babel/polyfill'</span></span><br></pre></td></tr></table></figure></p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">  // webpack.config.js</span><br><span class="line">  module: &#123;</span><br><span class="line"><span class="deletion">-   entry: ["@babel/polyfill", "./app/js"],</span></span><br><span class="line"><span class="addition">+   entry: ["./app/js"],</span></span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: /\.m?js$/,</span><br><span class="line">        exclude: /(node_modules|bower_components)/,</span><br><span class="line">        use: &#123;</span><br><span class="line">          loader: 'babel-loader',</span><br><span class="line">          options: &#123;</span><br><span class="line"><span class="deletion">-           presets: ['@babel/preset-env']</span></span><br><span class="line"><span class="addition">+           presets: [</span></span><br><span class="line"><span class="addition">+               '@babel/preset-env',</span></span><br><span class="line"><span class="addition">+               &#123;</span></span><br><span class="line"><span class="addition">+                 "targets": &#123;</span></span><br><span class="line"><span class="addition">+                   "ie": "11"</span></span><br><span class="line"><span class="addition">+                 &#125;,</span></span><br><span class="line"><span class="deletion">-                 "useBuiltIns": "entry"</span></span><br><span class="line"><span class="addition">+                 "useBuiltIns": "usage"</span></span><br><span class="line"><span class="addition">+               &#125;</span></span><br><span class="line"><span class="addition">+             ]</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>上面設定完之後，就會根據你在寫 code 的過程中，加上需要的 polyfill。</p>
<p>但是由於 Babel 不能判斷你 code 裏面的 type，所以不能載入正確的 Polyfill。比方說：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">"core-js/modules/es7.array.includes"</span>;</span><br><span class="line">a.includes <span class="comment">// 預設 a 是一個 Array，但實際 a 也可能是 String</span></span><br></pre></td></tr></table></figure>
<h4 id="2-1-3-手動引入要的-core-js"><a href="#2-1-3-手動引入要的-core-js" class="headerlink" title="2.1.3 手動引入要的 core.js"></a>2.1.3 手動引入要的 core.js</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'core-js/modules/es6.set.js'</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'core-js/modules/es6.array.find-index.js'</span></span><br></pre></td></tr></table></figure>
<p>但如果需要很多 Polyfill 的話，一個個載入就會變得很麻煩。</p>
<h3 id="2-2-Polyfill：不用Webpack"><a href="#2-2-Polyfill：不用Webpack" class="headerlink" title="2.2 Polyfill：不用Webpack"></a>2.2 Polyfill：不用Webpack</h3><h4 id="2-2-1-Gulp、Browser-引用打包"><a href="#2-2-1-Gulp、Browser-引用打包" class="headerlink" title="2.2.1 Gulp、Browser 引用打包"></a>2.2.1 Gulp、Browser 引用打包</h4><p>在引入@babel/polyfill下的dist\polyfill.min.js：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// gulpfile.js</span></span><br><span class="line"><span class="keyword">const</span> polyfill = <span class="string">'node_modules/babel-polyfill/dist/polyfill.min.js'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> jsfiles = [</span><br><span class="line">  <span class="string">'js/lib/otherJsLibrary.js'</span>,</span><br><span class="line">  polyfill,</span><br><span class="line">  <span class="string">'js/index.js'</span></span><br><span class="line">];</span><br><span class="line">gulp.task(<span class="string">'default'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> gulp.src(jsfile)</span><br><span class="line">    .pipe(concat(<span class="string">'index.min.js'</span>))   <span class="comment">//合併檔案</span></span><br><span class="line">    .pipe(uglify())</span><br><span class="line">    .pipe(gulp.dest(<span class="string">'dist/'</span>))   <span class="comment">//輸出</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>或者直接抓出檔案，在 Browser 直接引入：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"polyfill.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>這樣的結果當然就是 Bundle 整個會變得非常肥，不需要 Polyfill 的 Browser 也被迫下載，造成資源的浪費。</p>
<h4 id="2-2-2-Polyfill-io"><a href="#2-2-2-Polyfill-io" class="headerlink" title="2.2.2 Polyfill.io"></a>2.2.2 <a href="https://polyfill.io/v2/docs/" target="_blank" rel="noopener">Polyfill.io</a></h4><p>這個由金融時報（Financial Times）提供的服務，根據你的 UA 來判斷需要的 Polyfill（當然你可以指定，點<a href="https://polyfill.io/v2/docs/" target="_blank" rel="noopener">這裏</a>可以看文檔），用法也很簡單，在你的網頁加上：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.polyfill.io/v2/polyfill.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>在不同的 Browser 看就會發現很回傳的東西不太一樣：</p>
<p>這個是 Chrome 下看到的<br><img src="/2018/11/27/babel-usage/chrome.jpg" title="Chrome"></p>
<p>這是 IE 11 下看到的<br><img src="/2018/11/27/babel-usage/ie11.jpg" title="IE11"></p>
<p>當然若有安全上的考量，可以到他們的<a href="https://github.com/Financial-Times/polyfill-service" target="_blank" rel="noopener">github</a>，下載然後自己 Deploy 在自己的 Server 上吧！</p>
<p>雖然在特定較舊的 Browser，還是有很肥的問題，但是卻拯救了其他 90% 的 Browser！</p>
<h1 id="總結"><a href="#總結" class="headerlink" title="總結"></a>總結</h1><p>總結那麼多方法，代表說我之前活動案被折磨很慘（誤），個人覺得最好的方法，是搭配 Webpack 的 Babel，加上自己架設的 Polyfill services，但是實際效果有待確定，有空再更新使用效果。</p>
<h1 id="參考資料"><a href="#參考資料" class="headerlink" title="參考資料"></a>參考資料</h1><ol>
<li><a href="https://babeljs.io/docs/en/babel-polyfill" target="_blank" rel="noopener">https://babeljs.io/docs/en/babel-polyfill</a></li>
<li><a href="https://github.com/Financial-Times/polyfill-service" target="_blank" rel="noopener">https://github.com/Financial-Times/polyfill-service</a></li>
<li><a href="https://polyfill.io/v2/docs/" target="_blank" rel="noopener">https://polyfill.io/v2/docs/</a></li>
<li><a href="https://babeljs.io/docs/en/babel-preset-env" target="_blank" rel="noopener">https://babeljs.io/docs/en/babel-preset-env</a></li>
<li><a href="https://www.jianshu.com/p/0dc3bddb6da8" target="_blank" rel="noopener">https://www.jianshu.com/p/0dc3bddb6da8</a></li>
<li><a href="https://juejin.im/post/5c09d6d35188256d9832df9d" target="_blank" rel="noopener">https://juejin.im/post/5c09d6d35188256d9832df9d</a></li>
</ol>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://nereuseng.github.io/2018/10/08/api-racing/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="nereuseng">
      <meta itemprop="description" content="這是我記錄我程式能力成長的地方，目前集中在React, JavaScript等，歡迎來交流！">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="nereuseng">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/10/08/api-racing/" itemprop="url">
                  土炮處理：api非同步時間差造成的response順序問題
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">發表於</span>
              

              
                
              

              <time title="創建時間：2018-10-08 21:23:31" itemprop="dateCreated datePublished" datetime="2018-10-08T21:23:31+08:00">2018-10-08</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新於</span>
                
                <time title="修改時間：2018-12-08 15:38:06" itemprop="dateModified" datetime="2018-12-08T15:38:06+08:00">2018-12-08</time>
              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="問題——B頁面顯示A資料："><a href="#問題——B頁面顯示A資料：" class="headerlink" title="問題——B頁面顯示A資料："></a>問題——B頁面顯示A資料：</h1><p>在 SPA 下，User 點了A頁面，送出 A request。但是頁面出來前，立馬切換到B頁面，最後頁面B顯示A的資料。</p>
<h1 id="思路："><a href="#思路：" class="headerlink" title="思路："></a>思路：</h1><ol>
<li>原生取消 request =&gt; 2. 用 UI Loading 擋 User =&gt; 3. 幫 request 加流水號，去最新的 respond</li>
</ol>
<h1 id="1-原生取消request"><a href="#1-原生取消request" class="headerlink" title="1. 原生取消request"></a>1. 原生取消request</h1><p>一開始想要做 request cancel，但我們因爲是使用 fetch 的關係，原生不支援 abort 功能，另外要支援 IE 11 還要加多一包 polyfill，覺得太麻煩就放棄了。</p>
<h1 id="2-用UI-Loading擋User"><a href="#2-用UI-Loading擋User" class="headerlink" title="2. 用UI Loading擋User"></a>2. 用UI Loading擋User</h1><p>我的同事一直主張用這個方式，而我後來拒絕的原因，是因爲這比較適用在 Form 提交的情境下，若 User 誤點還要等資料回來才能點， User 應該會很惱火XD</p>
<p>註：適用在 Form Submit</p>
<h1 id="3-request加流水號"><a href="#3-request加流水號" class="headerlink" title="3. request加流水號"></a>3. request加流水號</h1><p>基本上沒什麼問題，唯一的風險，大概就是 User 的人數多起來，Server 的負擔有點重，這個後期再處理好了。</p>
<p>其實這個 idea 是從 RxJS 得到靈感的XD 一開始是想到 huli 大大在 Modern Web講 RxJS 提到的 Switch Map，但案子快完成了根本不可能。我就想能不能自己土炮做出類似Switch Map，於是就有了加流水號的想法。具體想法是在 call api 之前，在全域加上變數，再來到 callApi() 裏面，用 timestamp 加上 Uid，在 Api 回傳之後比對是不是最新的 Uid。看不懂直接看下面的code</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> variable = &#123;</span><br><span class="line">  lastestUid: <span class="string">''</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">callApi</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> apiUid = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime()</span><br><span class="line">  variable.lastestUid = apiUid</span><br><span class="line">  <span class="keyword">return</span> Api.fetchUserData().then( <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (apiUid !== variable.lastestUid) <span class="keyword">return</span></span><br><span class="line">    <span class="comment">// update api data here</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>這樣其實就解決了問題，還有可以優化的地方，把 new Date() 換成從0開始的 counter，效能會更快：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> variable = &#123;</span><br><span class="line">--lastestUid: <span class="string">''</span></span><br><span class="line">++lastestUid: <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">callApi</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">--<span class="keyword">const</span> apiUid = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime()</span><br><span class="line">++<span class="keyword">const</span> apiUid = variable.lastestUid + <span class="number">1</span></span><br><span class="line">  variable.lastestUid = apiUid</span><br><span class="line">  <span class="keyword">return</span> Api.fetchUserData().then( <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (apiUid !== variable.lastestUid) <span class="keyword">return</span></span><br><span class="line">    <span class="comment">// update api data here</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="後期處理"><a href="#後期處理" class="headerlink" title="後期處理"></a>後期處理</h1><p>這樣的方法畢竟還是應急，之後會 User 亂點對 Server 負擔還是很大的。詢問群組的大大之後，覺得這樣的方法還不錯：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">個人作法上會偏向用 UI Loading Modal 鎖使用者</span><br><span class="line">因為要去 check 最後一次 update 這件事會比較容易出錯</span><br><span class="line"></span><br><span class="line">Fetch Request 時，要把 Timeout 弄短一點，UI 擋 refresh，出現3秒之類的 loading，</span><br><span class="line">Timeout 短，那使用者至少不會太生氣 (如果網路慢)，然後用 loading 去鎖使用者亂點</span><br><span class="line"></span><br><span class="line">然後晚回來的資料可以存在類似 redux 的資料中心，這樣下次還可以使用</span><br><span class="line"></span><br><span class="line">沒及時回來：用 local 舊的資料 </span><br><span class="line">及時回來：用剛拿到的即時資料</span><br></pre></td></tr></table></figure>
<p>但是這樣的方法好優化好多東西哦，除了 Fetch 沒有 Timeout 的功能，如果 Timeout 後晚回來的資料要怎麼拿來更新data而不被丟掉，目前也是個問題，加上可能要自幹改很多東西，可能下次再試試看好了XD</p>
<h1 id="結論"><a href="#結論" class="headerlink" title="結論"></a>結論</h1><p>這件事要做得漂亮，不加重 Server 的負擔或降低 UX 真的要花很多功夫，而且原生沒有支援很多，很多眉眉角角都要自己處理，下次是不是要開始使用RxJS了呢XD</p>
<h1 id="參考資料"><a href="#參考資料" class="headerlink" title="參考資料"></a>參考資料</h1><ol>
<li><a href="https://stackoverflow.com/questions/46946380/fetch-api-request-timeout" target="_blank" rel="noopener">https://stackoverflow.com/questions/46946380/fetch-api-request-timeout</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/AbortController/abort" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Web/API/AbortController/abort</a></li>
<li><a href="https://drive.google.com/file/d/1HS5uBGfWf8900HJE3otnKQIex9c-KEd7/view" target="_blank" rel="noopener">https://drive.google.com/file/d/1HS5uBGfWf8900HJE3otnKQIex9c-KEd7/view</a></li>
</ol>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://nereuseng.github.io/2018/09/14/case-review-2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="nereuseng">
      <meta itemprop="description" content="這是我記錄我程式能力成長的地方，目前集中在React, JavaScript等，歡迎來交流！">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="nereuseng">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/09/14/case-review-2/" itemprop="url">
                  專案回顧心得—筆記篇
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">發表於</span>
              

              
                
              

              <time title="創建時間：2018-09-14 22:51:58" itemprop="dateCreated datePublished" datetime="2018-09-14T22:51:58+08:00">2018-09-14</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新於</span>
                
                <time title="修改時間：2018-09-16 23:46:20" itemprop="dateModified" datetime="2018-09-16T23:46:20+08:00">2018-09-16</time>
              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>這次的心得比較偏向個人的筆記，提醒自己在下次專案應該注意的部分。</p>
<h1 id="1-和設計師溝通共有的設計元素-Style-Guide"><a href="#1-和設計師溝通共有的設計元素-Style-Guide" class="headerlink" title="1. 和設計師溝通共有的設計元素(Style Guide)"></a>1. 和設計師溝通共有的設計元素(Style Guide)</h1><p>確定相同的設計元素(字體、按鈕、標題style、間距、邊框)，讓那些抽離出來變成組件或者是共用同個CSS。最佳的方法就是用Zeplin之類的軟體，增加溝通效率</p>
<h1 id="2-RWD的版型考量因素"><a href="#2-RWD的版型考量因素" class="headerlink" title="2. RWD的版型考量因素"></a>2. RWD的版型考量因素</h1><p>設計師通常只畫5個斷點（320px、640px、768px、1024px、1280px），</p>
<ul>
<li>要考量不同斷點之間的排版</li>
<li>字很多要怎麼辦、字太少要怎麼辦</li>
<li>button變多或select只有一個怎麼辦</li>
<li>儘量把內容在手機上做完整的顯示（RWD not AWD）</li>
<li>圖片橫圖同時也有直圖</li>
</ul>
<h1 id="3-網頁使用步驟與互動（UX）"><a href="#3-網頁使用步驟與互動（UX）" class="headerlink" title="3. 網頁使用步驟與互動（UX）"></a>3. 網頁使用步驟與互動（UX）</h1><p>和pm與設計師討論User使用的步驟，確定是否有animation。</p>
<h1 id="4-Api格式考慮以視覺的Component爲主"><a href="#4-Api格式考慮以視覺的Component爲主" class="headerlink" title="4. Api格式考慮以視覺的Component爲主"></a>4. Api格式考慮以視覺的Component爲主</h1><p>跟後端要求api的資料和Component同步，若無法達到，則考慮自己fetch後用reduce重組資料。</p>
<h1 id="5-過早優化是萬惡之源"><a href="#5-過早優化是萬惡之源" class="headerlink" title="5. 過早優化是萬惡之源"></a>5. 過早優化是萬惡之源</h1><p>在上線之前（甚至上線之後），需求都沒定下來，要用比較彈性的做法，先求有再求好：</p>
<ul>
<li>用上比較多功能的套件，方便需求增刪</li>
<li>用css class而不是html selector來寫css（eg: NOT div &gt; a）</li>
</ul>
<h1 id="6-別把1-看得太重"><a href="#6-別把1-看得太重" class="headerlink" title="6. 別把1%看得太重"></a>6. 別把1%看得太重</h1><p>也許還有1%的人還在用IE，但不能因爲他們就放棄新功能，應以大多數人爲主。被抓到再改吧（誤</p>
<h1 id="後記"><a href="#後記" class="headerlink" title="後記"></a>後記</h1><p>以上真的是濃縮再濃縮，精華中的精華，後期爲了這些而好痛苦，下次我不想犯下這些錯誤了（哭</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://nereuseng.github.io/2018/07/14/case-review/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="nereuseng">
      <meta itemprop="description" content="這是我記錄我程式能力成長的地方，目前集中在React, JavaScript等，歡迎來交流！">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="nereuseng">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/07/14/case-review/" itemprop="url">
                  專案回顧心得
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">發表於</span>
              

              
                
              

              <time title="創建時間：2018-07-14 22:58:22" itemprop="dateCreated datePublished" datetime="2018-07-14T22:58:22+08:00">2018-07-14</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新於</span>
                
                <time title="修改時間：2018-07-15 12:14:18" itemprop="dateModified" datetime="2018-07-15T12:14:18+08:00">2018-07-15</time>
              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>從3月14號就開始推專案的第一個commit，到昨天我切完預訂設計提供的psd，算是完成了一個很大的里程碑，算上今天剛好4個月。中間切了30多個頁面，自幹了多少個元件，踩了很多css的雷（技術債活該lol），來回顧一下這幾個月的心得。</p>
<h1 id="設計過於平面"><a href="#設計過於平面" class="headerlink" title="設計過於平面"></a>設計過於平面</h1><p>設計在處理320的版型，是爲了小版特別更改版型，在640之後採用統一版型。而在321到639的版型直接套用320版型，則元件的比例就會變得又扁又瘦長。另外，在320被組合在一起的元件，到了1200就要被分開，要花很多時間和css調整。再者在1200的版型上，提供了非常多資訊，但在320卻一併塞進來，造成畫面太擁擠。</p>
<p>320的版型在639會很奇怪</p>
<p></p><p data-height="314" data-theme-id="0" data-slug-hash="EROxvp" data-default-tab="css,result" data-user="nereuseng" data-embed-version="2" data-pen-title="component strange in 639px" class="codepen">See the Pen <a href="https://codepen.io/nereuseng/pen/EROxvp/" target="_blank" rel="noopener">component strange in 639px</a> by Nereus Eng Wei Xian (<a href="https://codepen.io/nereuseng" target="_blank" rel="noopener">@nereuseng</a>) on <a href="https://codepen.io" target="_blank" rel="noopener">CodePen</a>.</p><p></p>
<script async src="https://static.codepen.io/assets/embed/ei.js"></script>

<p>下面的按鈕在因爲小版型，而在中版型必須用position absolute固定，被迫與原本的結構分開</p>
<p></p><p data-height="265" data-theme-id="0" data-slug-hash="rrxeGP" data-default-tab="css,result" data-user="nereuseng" data-embed-version="2" data-pen-title="Layout forced to restructured" class="codepen">See the Pen <a href="https://codepen.io/nereuseng/pen/rrxeGP/" target="_blank" rel="noopener">Layout forced to restructured</a> by Nereus Eng Wei Xian (<a href="https://codepen.io/nereuseng" target="_blank" rel="noopener">@nereuseng</a>) on <a href="https://codepen.io" target="_blank" rel="noopener">CodePen</a>.</p><p></p>
<script async src="https://static.codepen.io/assets/embed/ei.js"></script>

<p>雖然最後有達到設計的要求，但是卻花了太多心力和時間完全不划算。應在提供設計的時候，在討論的時候就要想想做的複雜度，並和設計師討論修改的方向。</p>
<h1 id="Api格式不統一"><a href="#Api格式不統一" class="headerlink" title="Api格式不統一"></a>Api格式不統一</h1><p>整個專案到後期發現，很多時候元件都長得一樣，邏輯處理也一樣，但因爲api欄位名字不一樣，要寫一模一樣又長又臭的code，在這次的專案至少有四個這樣的頁面（能想像有什麼東西要改，就要做四次嗎？）。在開發之前，應要向後端統一格式，要不然後患無窮，後患無窮啊！！！</p>
<h1 id="設計師溝通——Zeplin！"><a href="#設計師溝通——Zeplin！" class="headerlink" title="設計師溝通——Zeplin！"></a>設計師溝通——Zeplin！</h1><img src="/2018/07/14/case-review/zeplin.jpg" title="Zeplin">
<p>對工程師來說，Photoshop上的抓顏色測量工具太弱，無法很快抓取，尤其是在RWD版型之間測量，甚至產生量到天荒地老的錯覺。在前期和設計師溝通，但開發時間一長，難免還是會忘記，因此需要一些ui標註和溝通工具，像是Zeplin。只要點區塊，他就會顯示字體顏色、大小、行高，和別的元素區塊的間距等訊息，超省時間的！</p>
<p>Zeplin也有註記功能，能讓設計師在標註一些注意事項。他也有和Slack整合（雖然同事不愛用就對了</p>
<h1 id="專案前要注意的地方"><a href="#專案前要注意的地方" class="headerlink" title="專案前要注意的地方"></a>專案前要注意的地方</h1><ul>
<li>RWD之間的過渡版面</li>
<li>在設計開工前溝通（使用工具，設計準則</li>
<li>RWD的內容是否能共用，而不是需要Display none或者position absolute（圖片儘量不要裁切</li>
<li>UX的互動方式（是否有動畫</li>
<li>User使用功能的流程（每一步的邏輯</li>
</ul>
<h1 id="設計基本準則"><a href="#設計基本準則" class="headerlink" title="設計基本準則"></a>設計基本準則</h1><p>因爲當初CSS的方式是每一個元件獨立(Vue style scoped)，一開始寫是非常美好，幾乎沒有什麼問題，也不會有CSS污染的問題。但後來發現一個很崩潰的事情：</p>
<p>兩三個禮拜前切的版有Button，於是我在那個Component的CSS中，定義他在RWD的各種大小顏色邊框動畫，但是卻發現現在切的Component也有一樣的Button，於是我又在那個Component裏面，寫了一模一樣的大小顏色邊框動畫。再來同個Component還有新的Button，hover之後邊框要有動畫<br>多兩個禮拜後，我又在新的設計圖看到這個按鈕。我知道他重複，想要提取出來，同時Button都要加上Border radius，但是我卻不知道他在哪裏了…</p>
<p>一直到我在FEDC聽到Atomic Design這個概念</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">We’re not designing pages, we’re designing systems of components.—Stephen Hay</span><br></pre></td></tr></table></figure>
<p>他的概念是先從最抽象的地方，比方說顏色，字體，Hover顏色等開始設計，把這些抽象的東西組合起來變成一個小的元件，再各種小元件組合成大元件，就就能統一設計語言，也能減少重複css的問題，維護的時候就不會陷入痛苦。</p>
<p>之後可以嘗試和設計師溝通，確定一些小Component的顏色大小Hover動畫，並以這個爲基準來切版。</p>
<h1 id="結論（與前面無關"><a href="#結論（與前面無關" class="headerlink" title="結論（與前面無關"></a>結論（與前面無關</h1><p>這次的專案，做到讓人心力交瘁，好像身體某部分死掉了。但是也知道自己的精力，是一種開發資源，如果在開發資源有限的情況下，最有效率的做出最完美的網頁，變成是我下個案子的重點。聽同事說還蠻推薦我下個案子開始使用Grid和css variables，ie 11變成是最後才要解決的問題，這樣的想法讓我頓時豁然開朗。希望下次的專案讓我人生變得更美好XD</p>
<p>參考連接：</p>
<ol>
<li><a href="http://bradfrost.com/blog/post/atomic-web-design/" target="_blank" rel="noopener">http://bradfrost.com/blog/post/atomic-web-design/</a></li>
<li><a href="https://zeplin.io/" target="_blank" rel="noopener">https://zeplin.io/</a></li>
</ol>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://nereuseng.github.io/2018/04/01/csstricks/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="nereuseng">
      <meta itemprop="description" content="這是我記錄我程式能力成長的地方，目前集中在React, JavaScript等，歡迎來交流！">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="nereuseng">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/01/csstricks/" itemprop="url">
                  css實用使用技巧
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">發表於</span>
              

              
                
              

              <time title="創建時間：2018-04-01 17:20:35" itemprop="dateCreated datePublished" datetime="2018-04-01T17:20:35+08:00">2018-04-01</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新於</span>
                
                <time title="修改時間：2018-06-14 22:01:22" itemprop="dateModified" datetime="2018-06-14T22:01:22+08:00">2018-06-14</time>
              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>最近在支援一件大案子：要切快30頁同時也要顧及每一頁的RWD，同時使用vue來寫。原本要做的team的前端是一個新人，找我來幫忙切版，她就幫忙接api，設計與實作vue架構。在這些不斷切板的過程，同時也逛一個網站發現，作者分享了好多的css selectors的使用方式，發現幾個好用的小技巧，在這邊做筆記，也分享給大家。</p>
<h1 id="counter"><a href="#counter" class="headerlink" title="counter()"></a>counter()</h1><p>配合僞元素:before使用，基本上就是更加靈活的List Element。功能非常強大非常推薦大家使用，除了可以自己設定在頁面的哪一角出現（只要還使用同一個.css檔,在SPA的時候甚至能跨頁使用），也能利用counters()創造多層級的序號。</p>
<p></p><p data-height="265" data-theme-id="0" data-slug-hash="xWjPZr" data-default-tab="css,result" data-user="nereuseng" data-embed-version="2" data-pen-title="csstricks-counter()" class="codepen">See the Pen <a href="https://codepen.io/nereuseng/pen/xWjPZr/" target="_blank" rel="noopener">csstricks-counter()</a> by Nereus Eng Wei Xian (<a href="https://codepen.io/nereuseng" target="_blank" rel="noopener">@nereuseng</a>) on <a href="https://codepen.io" target="_blank" rel="noopener">CodePen</a>.</p><p></p>
<script async src="https://static.codepen.io/assets/embed/ei.js"></script>

<h1 id="Fluid-Typography（流體排版）"><a href="#Fluid-Typography（流體排版）" class="headerlink" title="Fluid Typography（流體排版）"></a>Fluid Typography（流體排版）</h1><p><a href="https://websemantics.uk/tools/responsive-font-calculator/" target="_blank" rel="noopener">先上網址：點我</a></p>
<p>在切版中，常會遇到設計圖在各自的斷點很漂亮，但是在兩者之間的版型，文字圖片大小比例失衡的情況（尤其是設計者只有平面的概念），這個網站的計算公式，提供了一個很好的工具，讓你無痕的從A斷點過渡到B斷點。而且我發現他除了文字，任何能吃calc屬性都能用，非常的方便，有使用預處理器(CSS Preprocesser)的話，甚至寫mixin直接套入數據。</p>
<h1 id="var-或相同屬性獨立class"><a href="#var-或相同屬性獨立class" class="headerlink" title="var()或相同屬性獨立class"></a>var()或相同屬性獨立class</h1><p>在一個版型當中，通常會使用相同的padding、字型大小，要一直重複寫的話非常繁冗，加上RWD不同的版型，設計稿突然要改的話，就要改好幾個地方。這時候非常需要統一管理，而同一管理的方式，一個是css自帶的功能var()，再來就是把相關的屬性獨立出來，像是.padding、.font-size</p>
<p></p><p data-height="265" data-theme-id="0" data-slug-hash="wXgQdQ" data-default-tab="css,result" data-user="nereuseng" data-embed-version="2" data-pen-title="csstricks-independent class" class="codepen">See the Pen <a href="https://codepen.io/nereuseng/pen/wXgQdQ/" target="_blank" rel="noopener">csstricks-independent class</a> by Nereus Eng Wei Xian (<a href="https://codepen.io/nereuseng" target="_blank" rel="noopener">@nereuseng</a>) on <a href="https://codepen.io" target="_blank" rel="noopener">CodePen</a>.</p><p></p>
<script async src="https://static.codepen.io/assets/embed/ei.js"></script>

<h1 id="貓頭鷹選擇器-ast-ast"><a href="#貓頭鷹選擇器-ast-ast" class="headerlink" title="貓頭鷹選擇器 &ast; + &ast;"></a>貓頭鷹選擇器 &ast; + &ast;</h1><p>這個選擇器是在新加坡css.talk所分享的影片中，提到模組化css的一個技巧之一，+這個selector是The adjacent sibling selector，用意是用來選擇，前者同一層級中，往下算最靠近的元素。利用<em> + </em>的選擇器，可以把模組中從第二個開始的元素，加上margin-top等的style，這樣元素之間就有一定的空位。當然，如果使用:not(first-child)也會達到這樣的效果，但是若要真的實現，必須還要加上:not(first-child):not(:root)才不會選到body。但是這樣做的話，會造成權重太重語法改動的問題。</p>
<h1 id="not"><a href="#not" class="headerlink" title=":not()"></a>:not()</h1><p>:not()的selector適合用在style元素之間橫線。傳統的做法，是在style完所有元素的橫線後，針對最後一個再加:last-child把橫線拿掉。使用:not()會很簡潔。</p>
<h1 id="彈性處理Element內容的大小與排版"><a href="#彈性處理Element內容的大小與排版" class="headerlink" title="彈性處理Element內容的大小與排版"></a>彈性處理Element內容的大小與排版</h1><p>有一種情況，就是在同個尺寸下，元件的內容會很彈性，有時候多到每個Element塞不下，也會少到只有一個，固定字體大小的話，會非常難控制。想想有超多的Element，你每個放16px，空間超擠；但是只有一個元素的話，16px的字又太小了</p>
<h2 id="only-child"><a href="#only-child" class="headerlink" title=":only-child"></a>:only-child</h2><p>Child Element只有一個:only-child<br>因此利用:only-child的CSS selector，style只有一個Child Element的CSS。</p>
<h2 id="nth-last-child"><a href="#nth-last-child" class="headerlink" title=":nth-last-child()"></a>:nth-last-child()</h2><p>Child Element超過一定的數量:nth-last-child()<br>若想在超過6個Element的時候，做不同的style，可使用nth-last-child(n + 6)與nth-last-child(n + 6) ~ *，就能style超過6個Element。</p>
<p>參考連接：</p>
<ol>
<li><a href="https://kevinyank.com/posts/css-selectors-redux" target="_blank" rel="noopener">https://kevinyank.com/posts/css-selectors-redux</a></li>
<li><a href="https://websemantics.uk/tools/responsive-font-calculator/" target="_blank" rel="noopener">https://websemantics.uk/tools/responsive-font-calculator/</a></li>
<li><a href="https://www.w3cplus.com/css/css-polyfluidsizing-using-calc-vw-breakpoints-and-linear-equations.html" target="_blank" rel="noopener">https://www.w3cplus.com/css/css-polyfluidsizing-using-calc-vw-breakpoints-and-linear-equations.html</a></li>
</ol>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://nereuseng.github.io/2018/02/23/iframe-cors/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="nereuseng">
      <meta itemprop="description" content="這是我記錄我程式能力成長的地方，目前集中在React, JavaScript等，歡迎來交流！">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="nereuseng">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/02/23/iframe-cors/" itemprop="url">
                  跨網域控制iframe
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">發表於</span>
              

              
                
              

              <time title="創建時間：2018-02-23 12:00:44" itemprop="dateCreated datePublished" datetime="2018-02-23T12:00:44+08:00">2018-02-23</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新於</span>
                
                <time title="修改時間：2018-12-08 15:39:04" itemprop="dateModified" datetime="2018-12-08T15:39:04+08:00">2018-12-08</time>
              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>最近的業務需求，要在DFP上放視差廣告，就是原本比較小的圖片，滑到一定的高度之後，會自己變大。之前的做法是準備兩個iframe，需要的時候才顯示其中一個，但是需求方不想要投放兩個DFP廣告，並要直接控制同一個iframe的內容，因此才開始找尋如何跨網域控制iframe的方法。</p>
<h1 id="困難"><a href="#困難" class="headerlink" title="困難"></a>困難</h1><p>在HTML 5之前，對於iframe的控制，只能在於同個網域，<a href="https://stackoverflow.com/questions/19498725/control-iframe-content-with-javascript-html" target="_blank" rel="noopener">這邊</a> 完整的表示了同網域控制iframe的方法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 先抓iframe的ID</span></span><br><span class="line"><span class="keyword">var</span> iframe = <span class="built_in">document</span>.getElementById(<span class="string">"myIframe"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//抓你想要在iframe下抓的按鈕</span></span><br><span class="line"><span class="keyword">var</span> btn = iframe.contentWindow.document.getElementById(<span class="string">'mybutton'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//或者直接呼叫iframe下的function</span></span><br><span class="line">iframe.contentWindow.yourFunction();</span><br></pre></td></tr></table></figure>
<p>這樣的話是還不錯，甚至在之前的案子中，我還利用它來播放iframe裡面的影片(當然現在已經不行了，<a href="https://www.ettoday.net/news/20170918/1013302.htm" target="_blank" rel="noopener">參考鏈接</a>)，但是他不能用在DFP上。DFP廣告的素材都是自己上傳到DFP的Server，再從那邊的Server讀取，上面的方法就失效了。</p>
<h1 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h1><p>後來我查到在HTML 5有新的Api, Cross-document messaging，支援度也相當不錯，ie 11有支持。程式碼如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Main Page</span></span><br><span class="line">iframe.addEventListener(<span class="string">'load'</span>, adsAction, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">adsAction</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// distance between element with window top edge.</span></span><br><span class="line">    <span class="keyword">let</span> dist = wrapper.getBoundingClientRect().top</span><br><span class="line">    <span class="keyword">if</span> (dist &gt; <span class="number">-250</span> &amp;&amp; dist &lt;= <span class="number">100</span>) &#123;</span><br><span class="line">        <span class="comment">// send msg to iframe to told iframe do smth</span></span><br><span class="line">        preview.contentWindow.postMessage(<span class="string">'showComplete'</span>, <span class="string">'https://iframeWebsite.dfp'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (dist &gt; <span class="number">100</span> || dist &lt; <span class="number">-600</span>) &#123;       </span><br><span class="line">        preview.contentWindow.postMessage(<span class="string">'showPreview'</span>, <span class="string">'https://iframeWebsite.dfp'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// iframe</span></span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">'message'</span>, receiver, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">receiver</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// Website filtering</span></span><br><span class="line">    <span class="keyword">if</span>(e.origin === <span class="string">'http://mainPageWebsite'</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (e.data === <span class="string">'showComplete'</span>) &#123;</span><br><span class="line">            <span class="comment">// do the things you want</span></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(e.data === <span class="string">'showPreview'</span>) &#123;</span><br><span class="line">            <span class="comment">// do the things you want 2</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在網頁中，抓了iframe後,對iframepostMassage，在postMessage中可以傳入三個函數，前面的兩個是你要傳的訊息，以及iframe的網域，第三個是可選的參數，我還沒研究。<br>在iframe中，通過addEventListener中的message，會讓iframe收到訊息，，並且通過傳送過來的data來控制iframe。但沒有過濾origin的話，會使得所有其他網域的網站，能控制這個iframe。最好的方法就是，在function中加上網址過濾的判斷。</p>
<h1 id="遇到的問題"><a href="#遇到的問題" class="headerlink" title="遇到的問題"></a>遇到的問題</h1><p>在一開始執行時，會出現</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Failed to execute &apos;postMessage&apos; on &apos;DOMWindow&apos;: The target origin provided (&apos;https://iframeWebsite.dfp&apos;) does not match the recipient window&apos;s origin (&apos;http://mainPageWebsite&apos;).</span><br></pre></td></tr></table></figure>
<p>一開始我以為是http和https的問題，後來查了一下，發現是javascipt很可愛的非同步bug，就是一開始網頁就會在節點載好後，開始執行js，但是因為非同步的關係，iframe的內容還沒有生成，自然postMessage過去就找不到相應的js啦，因此我在網頁js下加上了iframe.addEventListener(‘load’, adsAction, false); 確保iframe載好後重載一次，並且也把因為重載，而造成畫面閃一下的問題處理了。</p>
<h1 id="結論"><a href="#結論" class="headerlink" title="結論"></a>結論</h1><p>看到又能用的畫面真的很開心，希望之後能想辦法解決，iframe自動播放影片的問題(好像解決了，下次有就會再分享好了)。</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://nereuseng.github.io/2018/01/17/redux-actions/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="nereuseng">
      <meta itemprop="description" content="這是我記錄我程式能力成長的地方，目前集中在React, JavaScript等，歡迎來交流！">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="nereuseng">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/17/redux-actions/" itemprop="url">
                  利用Redux-actions 來減少Redux的Boilerplate Code(2018/04/01更新)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">發表於</span>
              

              
                
              

              <time title="創建時間：2018-01-17 10:00:46" itemprop="dateCreated datePublished" datetime="2018-01-17T10:00:46+08:00">2018-01-17</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新於</span>
                
                <time title="修改時間：2018-12-08 15:37:16" itemprop="dateModified" datetime="2018-12-08T15:37:16+08:00">2018-12-08</time>
              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Why-redux-actions"><a href="#Why-redux-actions" class="headerlink" title="Why redux-actions?"></a>Why redux-actions?</h1><p>最近一直在Redux卡關, 除了有點玄妙的邏輯以外, 更重要的是他的boilerplate code很繁瑣, 於是在Telegram群組的大大推薦下, 我使用了Redux-Actions的插件, 效果差了很多! 人生也變得美好XD 在這邊我講記錄我更改的過程.</p>
<h1 id="背景提要"><a href="#背景提要" class="headerlink" title="背景提要:"></a>背景提要:</h1><p>我要在我的程式用HTML 5的Api取得使用者的座標, 再來更新使用者位置的天氣, 當中會用到兩個api, 在這邊我其實會有點疑問: 到底HTML5 GeoLocation的取得, 是不是Async的呢? 不過我不管啦, 先設定成是Async的好了, 那在這個範例就是有兩個Async的動作.(目前進度的關係, 先只有用到座標Api)</p>
<p>正常來說在傳統的React-Redux應該是這個樣子:</p>
<details><br>  <summary>詳細的Code請點我</summary><br>weather-actions.js<br><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; getUserLocation <span class="keyword">as</span> getUserLocationFromApi &#125; <span class="keyword">from</span> <span class="string">'component/userLocation.jsx'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 先設定好每一個action的return</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">startGetLocation</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        type: <span class="string">'LOCATION/START_GET_LOCATION'</span>,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">endGetLocation</span>(<span class="params">lat, lng</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        type: <span class="string">'LOCATION/END_GET_LOCATION'</span>,</span><br><span class="line">        lat,</span><br><span class="line">        lng</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//下面的function是利用redux thunk來進行async程式</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">location</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function">(<span class="params">dispatch, getState</span>) =&gt;</span> &#123;</span><br><span class="line">        dispatch(startGetLocation());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> getUserLocationFromApi().then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> &#123;<span class="attr">latitude</span>: lat, <span class="attr">longitude</span>: lng&#125; = res.coords;</span><br><span class="line"></span><br><span class="line">            dispatch(endGetLocation(lat, lng));</span><br><span class="line">        &#125;) <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'Error getting User Location'</span>, err);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><br>weather-reducer.js<br><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> initLocationState = &#123;</span><br><span class="line">    requestStatus: <span class="literal">false</span>,</span><br><span class="line">    lat: <span class="literal">NaN</span>,</span><br><span class="line">    lng: <span class="literal">NaN</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">location</span>(<span class="params"> state= initLocationState, action</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">switch</span> (action.type) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'@LOCATION/START_GET_LOCATION'</span>:</span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                ...state,</span><br><span class="line">            &#125;;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'@FORECAST/END_GET_LOCATION'</span>:</span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                ...state,</span><br><span class="line">                lat,</span><br><span class="line">                lng</span><br><span class="line">            &#125;;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">return</span> state;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><br></details>

<p><br></p>
<h1 id="createAction"><a href="#createAction" class="headerlink" title="createAction"></a>createAction</h1><p>這個是原本的code, 但是用上redux-actions之後code變成這樣:</p>
<p>Before:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">startGetUserLocation</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        type: <span class="string">'LOCATION/START_GET_LOCATION'</span>,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">endGetUserLocation</span>(<span class="params">lat, lng</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        type: <span class="string">'LOCATION/END_GET_LOCATION'</span>,</span><br><span class="line">        lat,</span><br><span class="line">        lng,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>After:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createAction &#125; <span class="keyword">from</span> <span class="string">'redux-actions'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; getUserLocation <span class="keyword">as</span> getUserLocationFromApi &#125; <span class="keyword">from</span> <span class="string">'component/userLocation.jsx'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> startGetUserLocation = createAction(<span class="string">'START_GET_USER_LOCATION'</span>);</span><br><span class="line"><span class="keyword">const</span> endGetUserLocation = createAction(<span class="string">'END_GET_USER_LOCATION'</span>);</span><br></pre></td></tr></table></figure>
<h1 id="handleActions"><a href="#handleActions" class="headerlink" title="handleActions"></a>handleActions</h1><p>Before:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> initLocationState = &#123;</span><br><span class="line">    requestStatus: <span class="literal">false</span>,</span><br><span class="line">    lat: <span class="literal">NaN</span>,</span><br><span class="line">    lng: <span class="literal">NaN</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">location</span>(<span class="params"> state= initLocationState, action</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">switch</span> (action.type) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'@LOCATION/START_GET_LOCATION'</span>:</span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                ...state,</span><br><span class="line">                requestStatus: <span class="literal">false</span>,</span><br><span class="line">            &#125;;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'@FORECAST/END_GET_LOCATION'</span>:</span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                ...state,</span><br><span class="line">                lat,</span><br><span class="line">                lng,</span><br><span class="line">                requestStatus: <span class="literal">true</span>,</span><br><span class="line">            &#125;;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">return</span> state;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>After:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; handleActions, combineActions &#125; <span class="keyword">from</span> <span class="string">'redux-actions'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> initLocationState = &#123;</span><br><span class="line">    requestStatus: <span class="literal">false</span>,</span><br><span class="line">    lat: <span class="literal">NaN</span>,</span><br><span class="line">    lng: <span class="literal">NaN</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> location = handleActions(&#123;</span><br><span class="line">GET_LOCATION: <span class="function">(<span class="params">state, action</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;...state lat:action.payload.lat, <span class="attr">lng</span>: action.payload.lng&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">GET_LOCATION_STATUS: <span class="function">(<span class="params">state, action</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;...state, <span class="attr">requestStatus</span>: action.payload.requestStatus&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;, initLocationState);</span><br></pre></td></tr></table></figure>
<h1 id="Spread-and-Destructuring"><a href="#Spread-and-Destructuring" class="headerlink" title="Spread and Destructuring"></a>Spread and Destructuring</h1><p>但是我覺得action.payload.lat, action.payload.lng, res.coords.latitude很繁冗, 後來我利用了spread和解構的語法, 讓他看起來比較整潔:</p>
<p>Before: </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> location = handleActions(&#123;</span><br><span class="line">    GET_LOCATION: <span class="function">(<span class="params">state, action</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> &#123;...state lat:action.payload.lat, <span class="attr">lng</span>: action.payload.lng&#125;</span><br><span class="line">        &#125;,</span><br><span class="line">    GET_LOCATION_STATUS: <span class="function">(<span class="params">state, action</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> &#123;...state, <span class="attr">requestStatus</span>: action.payload.requestStatus&#125;</span><br><span class="line">        &#125;    </span><br><span class="line">&#125;, initLocationState);</span><br></pre></td></tr></table></figure>
<p>After:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> location = handleActions(&#123;  </span><br><span class="line">    GET_LOCATION: <span class="function">(<span class="params">state, action</span>) =&gt;</span> &#123;        </span><br><span class="line">            <span class="keyword">return</span> &#123;...state, ...action.payload&#125;</span><br><span class="line">        &#125;,</span><br><span class="line">    GET_LOCATION_STATUS: <span class="function">(<span class="params">state, action</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> &#123;...state, ...action.payload&#125;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;, initLocationState);</span><br></pre></td></tr></table></figure>
<h1 id="combineActions"><a href="#combineActions" class="headerlink" title="combineActions:"></a>combineActions:</h1><p>再來我覺得原本handleActions那邊有點冗, </p>
<p>Before: </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> location = handleActions(&#123;</span><br><span class="line">    GET_LOCATION: <span class="function">(<span class="params">state, action</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> &#123;...state, ...action.payload&#125;</span><br><span class="line">        &#125;,</span><br><span class="line">    GET_LOCATION_STATUS: <span class="function">(<span class="params">state, action</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> &#123;...state, ...action.payload&#125;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;, initLocationState);</span><br></pre></td></tr></table></figure>
<p>配合 Redux Actions 的 combineActions:</p>
<p>After:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> location = handleActions(&#123;</span><br><span class="line">    [combineActions(<span class="string">'GET_LOCATION'</span>, <span class="string">'GET_LOCATION_STATUS'</span>)](state, action) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123; ...state, ...action.payload&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;, initLocationState);</span><br></pre></td></tr></table></figure></p>
<h2 id="combineActions的小坑："><a href="#combineActions的小坑：" class="headerlink" title="combineActions的小坑："></a>combineActions的小坑：</h2><p>在官方的Api文檔範例中, 他使用的是return { …state, counter: state.counter + amount }; 讓人會誤以為, 只能單純為計算才能combineActions(還是只有我這樣覺得?). 而我發現只要在dispatch的時候, 用object({})的方式傳到reducer, 再把傳入的object使用spread action.payload, 他就會根據你之前的設定好的initState, 找出相應的key來覆蓋. 但是這邊有點問題: combineAction裡面的args會越來越多,變得超級無敵長, 真的很可怕, 除了多寫幾個handle actions來分隔以外, 還有其他方法嗎?</p>
<h1 id="20180401-combineActions的理解錯誤"><a href="#20180401-combineActions的理解錯誤" class="headerlink" title="20180401 combineActions的理解錯誤"></a>20180401 combineActions的理解錯誤</h1><p>使用了以上的方法一段時間后，發現我什麽都能dispatch，甚至lat、lng的欄位，都能dispatch boolean值(預設值是數字)，讓我維護變得更麻煩，更加難除錯。我發現了一個人，他寫了關於一系列相當清楚的教學，他不建議使用combineActions，畢竟很多時候每一個action都有自己的目的(不用到的幹嘛不簡化成一個XD)，因此在某種程度上，combineActions是不被需要的。</p>
<p>下面將會新增利用這樣的概念寫好的code：</p>
<h1 id="結論"><a href="#結論" class="headerlink" title="結論"></a>結論</h1><p>簡單來說, Redux-Actions他簡化了一些模板code, 比方說action不用每一個都寫function, reducers不用寫switch case, 這樣的確少了很多麻煩. 今天的經驗分享就到這邊!</p>
<h1 id="完整code"><a href="#完整code" class="headerlink" title="完整code"></a>完整code</h1><p>*20180401新增：</p>
<details><br>  <summary>新版本的示範凑得請點我</summary><br>todo-reducers.js<br><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> initTodoState = &#123;</span><br><span class="line">    todos: [],</span><br><span class="line">    todoLoading: <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> todo = handleActions(&#123;</span><br><span class="line">    [<span class="string">'SET_LIST_TODO'</span>]: </span><br><span class="line">        <span class="function"><span class="keyword">function</span>(<span class="params">state, &#123;payload&#125;</span>) </span>&#123;            </span><br><span class="line">            <span class="built_in">console</span>.log(payload);</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                ...state,</span><br><span class="line">                todos: payload</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">    [<span class="string">'SET_CREATE_TODO'</span>]: </span><br><span class="line">        <span class="function"><span class="keyword">function</span> (<span class="params">state, &#123;payload&#125;</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> state</span><br><span class="line">        &#125;,</span><br><span class="line">    [<span class="string">'SET_CHECK_TODO'</span>]: </span><br><span class="line">        <span class="function"><span class="keyword">function</span> (<span class="params">state, &#123;paylaod&#125;</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> state</span><br><span class="line">        &#125;,</span><br><span class="line">    [<span class="string">'FETCH_TODO_REQUEST'</span>]:</span><br><span class="line">        <span class="function"><span class="keyword">function</span> (<span class="params">state, payload</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                ...state,</span><br><span class="line">                todoLoading: <span class="literal">true</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">    [<span class="string">'FETCH_TODO_RESPONSE'</span>]: </span><br><span class="line">        <span class="function"><span class="keyword">function</span> (<span class="params">state, &#123;payload&#125;</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                ...state,</span><br><span class="line">                todoLoading: <span class="literal">false</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;, initTodoState);</span><br></pre></td></tr></table></figure><br><br>todo-actions.js<br><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createAction, createActions &#125; <span class="keyword">from</span> <span class="string">'redux-actions'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123;</span><br><span class="line">    <span class="comment">// setlistTodo,</span></span><br><span class="line">    setCreateTodo,</span><br><span class="line">    setCheckTodo,</span><br><span class="line">    fetchTodoRequest,</span><br><span class="line">    fetchTodoResponse</span><br><span class="line">&#125; = createActions(</span><br><span class="line">    <span class="comment">// 'SET_LIST_TODO',</span></span><br><span class="line">    <span class="string">'SET_CREATE_TODO'</span>,</span><br><span class="line">    <span class="string">'SET_CHECK_TODO'</span>,</span><br><span class="line">    <span class="string">'FETCH_TODO_REQUEST'</span>,</span><br><span class="line">    <span class="string">'FETCH_TODO_RESPONSE'</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> setlistTodo = createAction(<span class="string">'SET_LIST_TODO'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">listTodo</span>(<span class="params">searchText = <span class="string">''</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">async</span> (dispatch, getState) =&gt; &#123;</span><br><span class="line">        dispatch(fetchTodoRequest());</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(searchText);</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">const</span> todos = <span class="keyword">await</span> listTodoFromApi(searchText);</span><br><span class="line">            <span class="built_in">console</span>.log(todos);</span><br><span class="line">            </span><br><span class="line">            dispatch(setlistTodo(todos));</span><br><span class="line">            dispatch(fetchTodoResponse());</span><br><span class="line">            <span class="keyword">return</span> todos;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">            <span class="built_in">console</span>.error(<span class="string">'Error getting todo'</span>, error);</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">createTodo</span>(<span class="params">mood, text</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">async</span> (dispatch, getState) =&gt; &#123;</span><br><span class="line">        dispatch(fetchTodoRequest());</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">await</span> createTodoFromApi(mood, text);</span><br><span class="line">            dispatch(setCreateTodo());</span><br><span class="line">            <span class="keyword">await</span> dispatch(listTodo());</span><br><span class="line">            dispatch(fetchTodoResponse());</span><br><span class="line">        &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">            <span class="built_in">console</span>.error(<span class="string">'Error creating todo'</span>, error);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">checkTodo</span>(<span class="params">id</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">async</span> (dispatch, getState) =&gt; &#123;</span><br><span class="line">        dispatch(fetchTodoRequest());</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">await</span> checkTodoFromApi(id);</span><br><span class="line">            dispatch(setCheckTodo());</span><br><span class="line">            <span class="keyword">await</span> dispatch(listTodo());</span><br><span class="line">            dispatch(fetchTodoResponse());</span><br><span class="line">        &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><br></details>

<details><br>  <summary>完整的code請點我</summary><br>weather-reducers.js<br><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; handleActions, combineActions &#125; <span class="keyword">from</span> <span class="string">'redux-actions'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> initLocationState = &#123;</span><br><span class="line">    requestStatus: <span class="literal">false</span>,</span><br><span class="line">    lat: <span class="literal">NaN</span>,</span><br><span class="line">    lng: <span class="literal">NaN</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> location = handleActions(&#123;</span><br><span class="line">    [combineActions(<span class="string">'GET_LOCATION'</span>, <span class="string">'GET_LOCATION_STATUS'</span>)](state, action) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123; ...state, ...action.payload&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;, initLocationState);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> initWeatherState = &#123;</span><br><span class="line">    city: <span class="string">'na'</span>,</span><br><span class="line">    code: <span class="number">-1</span>,</span><br><span class="line">    group:<span class="string">'na'</span>,</span><br><span class="line">    description: <span class="string">'N/A'</span>,</span><br><span class="line">    temp: <span class="literal">NaN</span>,</span><br><span class="line">    weatherLoading: <span class="literal">false</span>,</span><br><span class="line">    masking: <span class="literal">false</span>,</span><br><span class="line">    lat: <span class="literal">NaN</span>,</span><br><span class="line">    lng: <span class="literal">NaN</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> weather = handleActions (&#123;</span><br><span class="line">    [combineActions(<span class="string">'START_GET_USER_LOCATION'</span>, <span class="string">'END_GET_USER_LOCATION'</span>, <span class="string">'GET_LOCATION_WEATHER'</span>, <span class="string">'START_GET_WEATHER'</span>, <span class="string">'END_GET_WEATHER'</span>, <span class="string">'RESET_WEATHER'</span>, <span class="string">'MASK_TODAY_BG'</span>, <span class="string">'UNMASK_TODAY_BG'</span>)](state, action) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">`action.payload:`</span>,action.payload);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> &#123; ...state, ...action.payload, &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;, initWeatherState)</span><br></pre></td></tr></table></figure><br><br>weather-actions.js<br><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; getUserLocation <span class="keyword">as</span> getUserLocationFromApi &#125; <span class="keyword">from</span> <span class="string">'component/userLocation.jsx'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; getLocationWeatherToday <span class="keyword">as</span> getLocationWeatherTodayFromApi &#125; <span class="keyword">from</span> <span class="string">'Api/openWeatherMapApi.js'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Today */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> startGetWeather = createAction(<span class="string">'START_GET_WEATHER'</span>);</span><br><span class="line"><span class="keyword">const</span> endGetWeather = createAction(<span class="string">'END_GET_WEATHER'</span>);</span><br><span class="line"><span class="keyword">const</span> resetWeather = createAction(<span class="string">'RESET_WEATHER'</span>);</span><br><span class="line"><span class="keyword">const</span> maskTodayBg = createAction(<span class="string">'MASK_TODAY_BG'</span>);</span><br><span class="line"><span class="keyword">const</span> unmaskTodayBg = createAction(<span class="string">'UNMASK_TODAY_BG'</span>);</span><br><span class="line"><span class="keyword">const</span> getUserLocation = createAction(<span class="string">'GET_LOCATION'</span>);</span><br><span class="line"><span class="keyword">const</span> startGetUserLocation = createAction(<span class="string">'START_GET_USER_LOCATION'</span>);</span><br><span class="line"><span class="keyword">const</span> endGetUserLocation = createAction(<span class="string">'END_GET_USER_LOCATION'</span>);</span><br><span class="line"><span class="keyword">const</span> getWeatherLocation = createAction(<span class="string">'GET_LOCATION_WEATHER'</span>);</span><br><span class="line"><span class="keyword">const</span> getWeatherLocationStatus = createAction(<span class="string">'GET_LOCATION_WEATHER_STATUS'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getWeather</span>(<span class="params">city, unit</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function">(<span class="params">dispatch, getState</span>) =&gt;</span> &#123;</span><br><span class="line">        dispatch(startGetWeather(&#123;city, unit&#125;));</span><br><span class="line">        dispatch(maskTodayBg(&#123;<span class="attr">masking</span>: <span class="literal">true</span>&#125;));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> getWeatherFromApi(city, unit).then(<span class="function"><span class="params">weather</span> =&gt;</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(weather);</span><br><span class="line">            <span class="keyword">const</span> &#123;city, code, group , description, temp, unit&#125; = weather;</span><br><span class="line">            dispatch(endGetWeather(&#123;city, code, group, description, temp&#125;));</span><br><span class="line">            dispatch(setUnit(unit));</span><br><span class="line">        &#125;).then( <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">            setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">                dispatch(unmaskTodayBg(&#123;<span class="attr">masking</span>: <span class="literal">false</span>&#125;));</span><br><span class="line">            &#125;, <span class="number">600</span>);</span><br><span class="line">        &#125;).catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.error(<span class="string">'Error getting weather'</span>, err);</span><br><span class="line">            dispatch(resetWeather());</span><br><span class="line">            setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">                dispatch(unmaskTodayBg(&#123;<span class="attr">masking</span>: <span class="literal">false</span>&#125;));</span><br><span class="line">            &#125;, <span class="number">600</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* location</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getLocationWeather = <span class="function"><span class="keyword">function</span>(<span class="params">unit</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">async</span> (dispatch, getState) =&gt; &#123;</span><br><span class="line">        dispatch(startGetUserLocation(&#123;<span class="attr">requestStatus</span>: <span class="literal">true</span>&#125;));</span><br><span class="line">        dispatch(maskTodayBg(&#123;<span class="attr">masking</span>: <span class="literal">true</span>&#125;));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> res = <span class="keyword">await</span> getUserLocationFromApi();</span><br><span class="line">            <span class="keyword">const</span> &#123;<span class="attr">latitude</span>: lat, <span class="attr">longitude</span>: lng&#125; = res.coords;</span><br><span class="line">            <span class="built_in">console</span>.log(lat, lng);</span><br><span class="line">            dispatch(getUserLocation(&#123;lat, lng&#125;));</span><br><span class="line"></span><br><span class="line">            <span class="keyword">const</span> weather = <span class="keyword">await</span> getLocationWeatherTodayFromApi(lat, lng, unit);</span><br><span class="line">            <span class="built_in">console</span>.log(weather);</span><br><span class="line">            <span class="keyword">const</span> &#123;city, code, group , description, temp&#125; = weather;</span><br><span class="line">            dispatch(getWeatherLocation(&#123;city, code, group , description, temp&#125;));</span><br><span class="line"></span><br><span class="line">            dispatch(endGetUserLocation(&#123;<span class="attr">requestStatus</span>: <span class="literal">false</span>&#125;));</span><br><span class="line">            setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">                dispatch(unmaskTodayBg(&#123;<span class="attr">masking</span>: <span class="literal">false</span>&#125;));</span><br><span class="line">            &#125;, <span class="number">600</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'Error getting User Location'</span>, err);</span><br><span class="line">            setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">                dispatch(unmaskTodayBg(&#123;<span class="attr">masking</span>: <span class="literal">false</span>&#125;));</span><br><span class="line">            &#125;, <span class="number">600</span>);</span><br><span class="line">            <span class="comment">// <span class="doctag">TODO:</span> some reset action?</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><br></details>

<h1 id="參考資料"><a href="#參考資料" class="headerlink" title="參考資料"></a>參考資料</h1><ol>
<li><a href="https://github.com/dc198689/orange/blob/master/src/actions/posts/getPosts.js" target="_blank" rel="noopener">https://github.com/dc198689/orange/blob/master/src/actions/posts/getPosts.js</a></li>
<li><a href="https://github.com/ecmadao/Coding-Guide/blob/master/Notes/React/Redux/%E4%BD%BF%E7%94%A8%20Redux%20%E6%89%93%E9%80%A0%E4%BD%A0%E7%9A%84%E5%BA%94%E7%94%A8%20%E2%80%94%E2%80%94%20redux-actions.md" target="_blank" rel="noopener">https://github.com/ecmadao/Coding-Guide/blob/master/Notes/React/Redux/%E4%BD%BF%E7%94%A8%20Redux%20%E6%89%93%E9%80%A0%E4%BD%A0%E7%9A%84%E5%BA%94%E7%94%A8%20%E2%80%94%E2%80%94%20redux-actions.md</a></li>
<li><a href="https://redux-actions.js.org/docs/introduction/Tutorial.html" target="_blank" rel="noopener">https://redux-actions.js.org/docs/introduction/Tutorial.html</a></li>
<li><a href="https://ithelp.ithome.com.tw/articles/10187009" target="_blank" rel="noopener">https://ithelp.ithome.com.tw/articles/10187009</a></li>
<li><a href="https://www.jianshu.com/p/6ba5cd795077" target="_blank" rel="noopener">https://www.jianshu.com/p/6ba5cd795077</a></li>
</ol>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://nereuseng.github.io/2017/12/10/self-review/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="nereuseng">
      <meta itemprop="description" content="這是我記錄我程式能力成長的地方，目前集中在React, JavaScript等，歡迎來交流！">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="nereuseng">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/12/10/self-review/" itemprop="url">
                  近期工作心得小結
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">發表於</span>
              

              
                
              

              <time title="創建時間：2017-12-10 10:00:46" itemprop="dateCreated datePublished" datetime="2017-12-10T10:00:46+08:00">2017-12-10</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新於</span>
                
                <time title="修改時間：2018-06-10 19:02:57" itemprop="dateModified" datetime="2018-06-10T19:02:57+08:00">2018-06-10</time>
              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>找了新工作後，進入一陣蜜月期，開始接手專案。這邊先說一下，我目前在一家報社當前端工程師，雖然說職稱很怪，但是做的東西的確是前端的內容。這邊的性質是接案型，前端的主管會委派你負責一個案子，主管前期會和你一起開會，之後就全權給你負責了。通常在一個案子，會有一個後端、設計、PM的人一起負責，而之後就要和他們協調可行性與技術問題，有點像是大學時期分組報告的感覺。由於前端完成時間只有一個禮拜，基本上架構並沒有很好，而且也沒有用很多有效率的工具，因此在這邊記錄，希望下次不要犯下面提到的錯誤。</p>
<h1 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h1><p>我自己用的是vscode直接切版，css都是全手工，這樣會讓我的css結構鬆散，到了開發後期非常難維護，幸好這個是活動網頁，要不然我會把自己殺死哈哈。開發之後需要各種文件的壓縮，像是HTML JS CSS的檔案，但是到了這邊我有點糾結，公司的人都在用gulp，但是感覺Webpack很潮，還能async loading，react也會用到。但後來決定先學著gulp，再來回頭學Webpack。總結了一下，下次需要用到的工具：</p>
<ol>
<li>stylus</li>
<li>gulp<br>2.1 HTML JS CSS壓縮<br>npm install gulp gulp-html-replace gulp-minify-html gulp-minify-css gulp-uglify gulp-concat gulp-rename -save-dev<br>2.2 圖片的壓縮<br>npm install –save-dev gulp-imagemin<br>2.3 SSI(Server Side Includes)<br>這個能夠讓你一些重複的模板集中起來管理，更加方便開發，不需要每一個地方逐一修改<br>npm install browsersync-ssi</li>
</ol>
<h1 id="架構"><a href="#架構" class="headerlink" title="架構"></a>架構</h1><p>當初主管和pm討論出來的結果是做一個entry page，再加上面六個幾乎一樣的活動頁面，和一個結束頁面，但是後來開發讓我覺得，這樣其實開發非常難維護，雖然後來用了SSI讓維護的工作稍微減輕，但是想到其實能用React做會更快。只要把我要的Header寫好，把不同的圖片當成參數傳進去當props，就能很快的維護了。但是後來想到這個活動會連動到後台的驗證，需要把全部換成JSP，應要開一個api驗證的話，會很浪費大家的時間。只能等下次有機會，練習用框架寫。</p>
<h1 id="溝通"><a href="#溝通" class="headerlink" title="溝通"></a>溝通</h1><p>後端雖然很資深，但是技術能力偏弱，甚至活動頁面要驗證的事情，也是我到最後提醒才想起(這段是鳥事，唉)，和能力無法成正比，因此發現留意到這樣的問題，就要先幫忙想，要不然之後要幫忙收爛攤子。</p>
<p>一開始拿到設計圖後，沒有和設計和PM確認使用流程，導致後來要更改版型，甚至發現遺漏頁面。</p>
<h1 id="結論"><a href="#結論" class="headerlink" title="結論"></a>結論</h1><p>溝通不足，缺少工具的運用，希望下次不要遇到這樣的問題了！</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://nereuseng.github.io/2017/11/08/oh-my-zsh/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="nereuseng">
      <meta itemprop="description" content="這是我記錄我程式能力成長的地方，目前集中在React, JavaScript等，歡迎來交流！">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="nereuseng">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/08/oh-my-zsh/" itemprop="url">
                  Windows 10上整合Vs code的Oh-my-zsh
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">發表於</span>
              

              
                
              

              <time title="創建時間：2017-11-08 11:52:55" itemprop="dateCreated datePublished" datetime="2017-11-08T11:52:55+08:00">2017-11-08</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新於</span>
                
                <time title="修改時間：2018-10-08 21:21:07" itemprop="dateModified" datetime="2018-10-08T21:21:07+08:00">2018-10-08</time>
              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="2018-10更新："><a href="#2018-10更新：" class="headerlink" title="2018/10更新："></a>2018/10更新：</h1><p>Windows 10新版本，已無需啓動Linux子系統，另外下面新增字體、主題安裝與Nodejs版本提升。</p>
<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>看到線上讀書會的有一個講者用的Terminal[<a href="https://youtu.be/rsaqfyDLzQM?t=1m13s" target="_blank" rel="noopener">1</a>]，發現原來Terminal有那麼方便的功能，讓我立馬生火XD 花了一點時間研究怎麼安裝，踩了一下雷並在這邊分享心得。說到踩雷，我發現關於Oh-my-zsh繁體中文的心得分享資源，非常的少啊，於是激起我想要寫這篇文章的動力。</p>
<h1 id="流程"><a href="#流程" class="headerlink" title="流程"></a>流程</h1><p>啟動Linux子系統 -&gt; 安裝Zsh -&gt; Oh-my-zsh安裝與設定 -&gt; Vs code整合設定 -&gt;結束！</p>
<h1 id="啟動Linux子系統"><a href="#啟動Linux子系統" class="headerlink" title="啟動Linux子系統"></a>啟動Linux子系統</h1><p><del>如果你沒有進行秋季創作者更新（Fall Creators Update）的話，請你跟著我的做法：</del></p>
<p><del>設定 -&gt; 更新與安全性 -&gt; 開發人員專用 -&gt; 點擊“開發人員模式”</del></p>
<p><del>開啟CMD或者Powershell，輸入<em>OptionalFeatures.exe</em>，跳出來的目錄下選擇“適用於Linux的Windows子系統(搶先版(Beta))”，並重啟電腦。電腦重啟後，打開CMD或者Powershell，輸入<em>bash</em>就能開始安裝Linux子系統。</del></p>
<h3 id="2018-10-月更新："><a href="#2018-10-月更新：" class="headerlink" title="2018/10 月更新："></a>2018/10 月更新：</h3><p>目前更新到最新版本的windows後，不需要這樣特地開啓，只要到Microsoft Store搜尋『Ubuntu』下載安裝，下載後開啓按照他的指示安裝就行了。</p>
<h1 id="安裝Zsh"><a href="#安裝Zsh" class="headerlink" title="安裝Zsh"></a>安裝Zsh</h1><p>在安裝Zsh之前，要在Bash環境下設定：</p>
<p>安裝 cURL<br><code>sudo apt-get install curl</code></p>
<p>安裝 git<br><code>sudo apt-add-repository ppa:git-core/ppa</code><br><code>sudo apt-get update</code><br><code>sudo apt-get install git</code></p>
<p>最後安裝 Zsh<br><code>sudo apt-get install zsh</code></p>
<p>安裝完畢之後，你可以先在bash裡面先試試看輸入<em>zsh</em>，如果他變成比較短的開頭，代表你成功安裝zsh！</p>
<h1 id="Oh-my-zsh安裝與設定"><a href="#Oh-my-zsh安裝與設定" class="headerlink" title="Oh-my-zsh安裝與設定"></a>Oh-my-zsh安裝與設定</h1><p>這邊提醒大家，</p>
<p>一切的改動請在Terminal完成！！[<a href="https://blogs.msdn.microsoft.com/commandline/2016/11/17/do-not-change-linux-files-using-windows-apps-and-tools/" target="_blank" rel="noopener">2</a>]<br>一切的改動請在Terminal完成！！<br>一切的改動請在Terminal完成！！</p>
<p>千萬<em>不要</em>在其他的Windows編輯器像是Sublime Notepad Vscode等來編輯bashrc、zshrc等文檔<br>做錯的話就要前功盡棄了！</p>
<p>安裝Oh-my-zsh<br><code>curl -L https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh | bash</code></p>
<p>複製設定檔，通常在安裝zsh之後，需要我們自行設置~/.zshrc，這邊為了防止出錯，直接先套用Oh-my-zsh的預設模板檔案：<br><code>cp ~/.oh-my-zsh/templates/zshrc.zsh-template ~/.zshrc</code></p>
<p>目前來說，你的Oh-my-zsh已經成功安裝了！如果要啟動他，你要先打開Powershell -&gt; <em>bash</em> -&gt; <em>zsh</em>，但是這樣還是不夠方便，下面將預設開啟bash將會直接打開zsh：</p>
<p>在Bash Terminal輸入<br><code>nano ~/.bashrc</code></p>
<p>在Terminal將會跳出.bashrc的編輯畫面,在第一段與第二段的#號段落之間，輸入：<br><code>bash -c zsh</code></p>
<p>建議直接手打，減少前功盡棄的機會。<a href="https://gist.github.com/evdokimovm/67e4fcd938af98528aa108574626e522#file-bashrc-L5" target="_blank" rel="noopener">範本參考鏈接</a></p>
<p>再次提醒，上面的段落，<br>不要用Vscode、Sublime Notepad等編輯器編輯！！<br>不要用Vscode、Sublime Notepad等編輯器編輯！！<br>不要用Vscode、Sublime Notepad等編輯器編輯！！</p>
<h2 id="可選的設定"><a href="#可選的設定" class="headerlink" title="可選的設定"></a>可選的設定</h2><h3 id="主題字型"><a href="#主題字型" class="headerlink" title="主題字型"></a>主題字型</h3><p>因為Oh-my-zsh的主題大部分都用Powerline字型，所以我會推薦大家安裝，這邊的環境不需要用bash，一般的powershell或者cmd就好了，目錄在隨便一個都可以(照指示安裝後會刪除檔案)</p>
<p><code>git clone https://github.com/powerline/fonts.git --depth=1</code><br><code>cd fonts</code><br><code>./install.sh</code><br><code>cd ..</code><br><code>rm -rf fonts</code></p>
<h3 id="2018-10-月更新：-1"><a href="#2018-10-月更新：-1" class="headerlink" title="2018/10 月更新："></a>2018/10 月更新：</h3><p>目前我會選擇我想要的字體，下載ttf檔案，直接用window安裝。<br>設置字體：開啓Ubuntu -&gt; 點擊左上角Icon -&gt; Properties -&gt; Font -&gt; 安裝好的檔案。<br>如果找不到的話請嘗試重啓和重裝。</p>
<h3 id="Random主題"><a href="#Random主題" class="headerlink" title="Random主題"></a>Random主題</h3><p>除此之外我也會讓zsh的主題random，在Bash環境下：</p>
<p><code>nano ~/.zshrc</code></p>
<p>如果有成功把Oh-my-zsh的設定模板複製，就能看到文檔中會有<em>ZSH_THEME</em>，把他改成<br><code>ZSH_THEME=&quot;random&quot;</code><br>再按Ctrl+X，按保存</p>
<p>如果有一天random到你喜歡的主題，可以輸入這個指令查看：<br><code>print $RANDOM_THEME</code><br>到時候就能自己固定你喜歡的主題</p>
<h3 id="2018-10-月更新：-2"><a href="#2018-10-月更新：-2" class="headerlink" title="2018/10 月更新："></a>2018/10 月更新：</h3><p>目前會固定使用bullet-train，配合的字型爲Menlo for Powerline，推薦大家使用，大家可以試試看XD</p>
<h3 id="安裝插件"><a href="#安裝插件" class="headerlink" title="安裝插件"></a>安裝插件</h3><p>和上面一樣，在Bash環境下：</p>
<p><code>nano ~/.zshrc</code></p>
<p>一直按向下鍵，找到沒有#號的plugins，理論上一開始括號裡面會有git，你可以參考我的設定：<br><code>plugins=(git wd autojump zsh-syntax-highlighting zsh-autosuggestions)</code></p>
<h1 id="Vs-code整合設定"><a href="#Vs-code整合設定" class="headerlink" title="Vs code整合設定"></a>Vs code整合設定</h1><p>到了這邊，其實你就能好好使用Oh-my-zsh了，但是我習慣在Vs code上使用Terminal，因此另外加上設置：</p>
<p>Vs code -&gt; 檔案 -&gt; 喜好設定 -&gt; 設定</p>
<p>就會開出你原本的設定Json檔，在右邊的下面加上</p>
<p><code>&quot;terminal.integrated.shell.windows&quot;: &quot;C:\\Windows\\sysnative\\bash.exe&quot;,</code><br><code>&quot;terminal.integrated.shellArgs.windows&quot;: [&quot;-c&quot;, &quot;zsh&quot;]</code><br><code>&quot;terminal.integrated.fontFamily&quot;: &quot;Anonymous Pro for Powerline&quot;,</code></p>
<p>如果你用的是Vs code 64bit版本，請改成</p>
<p><code>&quot;terminal.integrated.shell.windows&quot;: &quot;C:\\Windows\\sysnative\\bash.exe&quot;,</code><br><code>&quot;terminal.integrated.shellArgs.windows&quot;: [&quot;-c&quot;, &quot;zsh&quot;]</code><br><code>&quot;terminal.integrated.fontFamily&quot;: &quot;Anonymous Pro for Powerline&quot;,</code></p>
<p>記得要在前面加上逗號哦！不過後來我發現字體還是有點怪怪的，便移除了最後一行fontFamily的設定<br>之後在你的文件下，按Ctrl+`就能開啟你文件目錄下的Terminal了！</p>
<h1 id="安裝npm"><a href="#安裝npm" class="headerlink" title="安裝npm"></a>安裝npm</h1><p>之前在Windows下安裝的npm是無法被Linux的Bash抓到，因此要另外在Bash安裝npm：</p>
<p><code>curl -sL https://deb.nodesource.com/setup_8.x | sudo -E bash -</code><br><code>sudo apt-get install -y nodejs</code><br><code>sudo npm install -g npm</code><br><code>npm --version</code></p>
<p>並在~/.zshrc第一段的#號段落下，加上這些：<br><code>PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games</code></p>
<h1 id="障礙排除"><a href="#障礙排除" class="headerlink" title="障礙排除"></a>障礙排除</h1><p>如果你遇到Input/output error，個人的建議是，你把Ubuntu刪除再重新安裝<a href="https://github.com/Microsoft/WSL/issues/904" target="_blank" rel="noopener">問題參考鏈接參考鏈接</a></p>
<h1 id="參考連結："><a href="#參考連結：" class="headerlink" title="參考連結："></a>參考連結：</h1><ol>
<li><a href="https://youtu.be/rsaqfyDLzQM?t=1m13s" target="_blank" rel="noopener">https://youtu.be/rsaqfyDLzQM?t=1m13s</a></li>
<li><a href="https://blogs.msdn.microsoft.com/commandline/2016/11/17/do-not-change-linux-files-using-windows-apps-and-tools/" target="_blank" rel="noopener">https://blogs.msdn.microsoft.com/commandline/2016/11/17/do-not-change-linux-files-using-windows-apps-and-tools/</a></li>
<li><a href="https://gist.github.com/evdokimovm/67e4fcd938af98528aa108574626e522#file-bashrc-L5" target="_blank" rel="noopener">https://gist.github.com/evdokimovm/67e4fcd938af98528aa108574626e522#file-bashrc-L5</a></li>
<li><a href="http://www.jianshu.com/p/fe244b1c7737" target="_blank" rel="noopener">http://www.jianshu.com/p/fe244b1c7737</a></li>
<li><a href="https://github.com/robbyrussell/oh-my-zsh/issues/5725" target="_blank" rel="noopener">https://github.com/robbyrussell/oh-my-zsh/issues/5725</a></li>
<li><a href="https://www.jazz321254.com/visual-studio-code-zsh/" target="_blank" rel="noopener">https://www.jazz321254.com/visual-studio-code-zsh/</a></li>
<li><a href="https://www.zhihu.com/question/49284484" target="_blank" rel="noopener">https://www.zhihu.com/question/49284484</a></li>
<li><a href="https://winsmarts.com/run-oh-my-zsh-as-integrated-shell-in-vscode-on-windows-7d69f72bafa3" target="_blank" rel="noopener">https://winsmarts.com/run-oh-my-zsh-as-integrated-shell-in-vscode-on-windows-7d69f72bafa3</a></li>
<li><a href="https://evdokimovm.github.io/windows/zsh/shell/syntax/highlighting/ohmyzsh/hyper/terminal/2017/02/24/how-to-install-zsh-and-oh-my-zsh-on-windows-10.html" target="_blank" rel="noopener">https://evdokimovm.github.io/windows/zsh/shell/syntax/highlighting/ohmyzsh/hyper/terminal/2017/02/24/how-to-install-zsh-and-oh-my-zsh-on-windows-10.html</a></li>
<li><a href="https://github.com/robbyrussell/oh-my-zsh#manual-installation" target="_blank" rel="noopener">https://github.com/robbyrussell/oh-my-zsh#manual-installation</a></li>
<li><a href="http://icarus4.logdown.com/posts/177661-from-bash-to-zsh-setup-tips" target="_blank" rel="noopener">http://icarus4.logdown.com/posts/177661-from-bash-to-zsh-setup-tips</a></li>
<li><a href="https://github.com/Microsoft/WSL/issues/904" target="_blank" rel="noopener">https://github.com/Microsoft/WSL/issues/904</a></li>
<li><a href="https://blog.miniasp.com/post/2018/06/15/My-Windows-Subsystem-for-Linux-WSL-Setup-2018.aspx" target="_blank" rel="noopener">https://blog.miniasp.com/post/2018/06/15/My-Windows-Subsystem-for-Linux-WSL-Setup-2018.aspx</a></li>
</ol>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://nereuseng.github.io/2017/11/08/oh-my-zsh/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="nereuseng">
      <meta itemprop="description" content="這是我記錄我程式能力成長的地方，目前集中在React, JavaScript等，歡迎來交流！">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="nereuseng">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/08/oh-my-zsh/" itemprop="url">
                  Windows 10上整合Vs code的Oh-my-zsh(20180119更新)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">發表於</span>
              

              
                
              

              <time title="創建時間：2017-11-08 11:52:55" itemprop="dateCreated datePublished" datetime="2017-11-08T11:52:55+08:00">2017-11-08</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新於</span>
                
                <time title="修改時間：2018-06-10 19:02:57" itemprop="dateModified" datetime="2018-06-10T19:02:57+08:00">2018-06-10</time>
              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>看到線上讀書會的有一個講者用的Terminal[<a href="https://youtu.be/rsaqfyDLzQM?t=1m13s" target="_blank" rel="noopener">1</a>]，發現原來Terminal有那麼方便的功能，讓我立馬生火XD 花了一點時間研究怎麼安裝，踩了一下雷並在這邊分享心得。說到踩雷，我發現關於Oh-my-zsh繁體中文的心得分享資源，非常的少啊，於是激起我想要寫這篇文章的動力。</p>
<h1 id="流程"><a href="#流程" class="headerlink" title="流程"></a>流程</h1><p>啟動Linux子系統 -&gt; 安裝Zsh -&gt; Oh-my-zsh安裝與設定 -&gt; Vs code整合設定 -&gt;結束！</p>
<p>#啟動Linux子系統</p>
<p>如果你沒有進行秋季創作者更新（Fall Creators Update）的話，請你跟著我的做法：</p>
<ul>
<li>20180119更新：Windows已經正式開始推送更新了，有空我再更新有更新的做法</li>
</ul>
<p>設定 -&gt; 更新與安全性 -&gt; 開發人員專用 -&gt; 點擊“開發人員模式”</p>
<p>開啟CMD或者Powershell，輸入<em>OptionalFeatures.exe</em>，跳出來的目錄下選擇“適用於Linux的Windows子系統(搶先版(Beta))”，並重啟電腦。電腦重啟後，打開CMD或者Powershell，輸入<em>bash</em>就能開始安裝Linux子系統。</p>
<h1 id="安裝Zsh"><a href="#安裝Zsh" class="headerlink" title="安裝Zsh"></a>安裝Zsh</h1><p>在安裝Zsh之前，要在Bash環境下設定：</p>
<p>安裝 cURL<br><code>sudo apt-get install curl</code></p>
<p>安裝 git<br><code>sudo apt-add-repository ppa:git-core/ppa
sudo apt-get update
sudo apt-get install git</code></p>
<p>最後安裝 Zsh<br><code>sudo apt-get install zsh</code></p>
<p>安裝完畢之後，你可以先在bash裡面先試試看輸入<em>zsh</em>，如果他變成比較短的開頭，代表你成功安裝zsh！</p>
<h1 id="Oh-my-zsh安裝與設定"><a href="#Oh-my-zsh安裝與設定" class="headerlink" title="Oh-my-zsh安裝與設定"></a>Oh-my-zsh安裝與設定</h1><p>這邊提醒大家，</p>
<p>一切的改動請在Terminal完成！！[<a href="https://blogs.msdn.microsoft.com/commandline/2016/11/17/do-not-change-linux-files-using-windows-apps-and-tools/" target="_blank" rel="noopener">2</a>]<br>一切的改動請在Terminal完成！！<br>一切的改動請在Terminal完成！！</p>
<p>千萬<em>不要</em>在其他的Windows編輯器像是Sublime Notepad Vscode等來編輯bashrc、zshrc等文檔<br>做錯的話就要前功盡棄了！</p>
<p>安裝Oh-my-zsh<br><code>curl -L https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh | bash</code></p>
<p>複製設定檔，通常在安裝zsh之後，需要我們自行設置~/.zshrc，這邊為了防止出錯，直接先套用Oh-my-zsh的預設模板檔案：<br><code>cp ~/.oh-my-zsh/templates/zshrc.zsh-template ~/.zshrc</code></p>
<p>目前來說，你的Oh-my-zsh已經成功安裝了！如果要啟動他，你要先打開Powershell -&gt; <em>bash</em> -&gt; <em>zsh</em>，但是這樣還是不夠方便，下面將預設開啟bash將會直接打開zsh：</p>
<p>在Bash Terminal輸入<br><code>nano ~/.bashrc</code></p>
<p>在Terminal將會跳出.bashrc的編輯畫面,在第一段與第二段的#號段落之間，輸入：<br><code>bash -c zsh</code></p>
<p>建議直接手打，減少前功盡棄的機會。<a href="https://gist.github.com/evdokimovm/67e4fcd938af98528aa108574626e522#file-bashrc-L5" target="_blank" rel="noopener">範本參考鏈接</a></p>
<p>再次提醒，上面的段落，<br>不要用Vscode、Sublime Notepad等編輯器編輯！！<br>不要用Vscode、Sublime Notepad等編輯器編輯！！<br>不要用Vscode、Sublime Notepad等編輯器編輯！！</p>
<h2 id="可選的設定"><a href="#可選的設定" class="headerlink" title="可選的設定"></a>可選的設定</h2><h3 id="主題字型"><a href="#主題字型" class="headerlink" title="主題字型"></a>主題字型</h3><p>因為Oh-my-zsh的主題大部分都用Powerline字型，所以我會推薦大家安裝，這邊的環境不需要用bash，一般的powershell或者cmd就好了，目錄在隨便一個都可以(照指示安裝後會刪除檔案)</p>
<p><code>git clone https://github.com/powerline/fonts.git --depth=1
cd fonts
./install.sh
cd ..
rm -rf fonts</code></p>
<h3 id="Random主題"><a href="#Random主題" class="headerlink" title="Random主題"></a>Random主題</h3><p>除此之外我也會讓zsh的主題random，在Bash環境下：</p>
<p><code>nano ~/.zshrc</code></p>
<p>如果有成功把Oh-my-zsh的設定模板複製，就能看到文檔中會有<em>ZSH_THEME</em>，把他改成<br><code>ZSH_THEME=&quot;random&quot;</code><br>再按Ctrl+X，按保存</p>
<p>如果有一天random到你喜歡的主題，可以輸入這個指令查看：<br><code>print $RANDOM_THEME</code><br>到時候就能自己固定你喜歡的主題</p>
<h3 id="安裝插件"><a href="#安裝插件" class="headerlink" title="安裝插件"></a>安裝插件</h3><p>和上面一樣，在Bash環境下：</p>
<p><code>nano ~/.zshrc</code></p>
<p>一直按向下鍵，找到沒有#號的plugins，理論上一開始括號裡面會有git，你可以參考我的設定：<br><code>plugins=(git wd autojump zsh-syntax-highlighting zsh-autosuggestions)</code></p>
<h1 id="Vs-code整合設定"><a href="#Vs-code整合設定" class="headerlink" title="Vs code整合設定"></a>Vs code整合設定</h1><p>到了這邊，其實你就能好好使用Oh-my-zsh了，但是我習慣在Vs code上使用Terminal，因此另外加上設置：</p>
<p>Vs code -&gt; 檔案 -&gt; 喜好設定 -&gt; 設定</p>
<p>就會開出你原本的設定Json檔，在右邊的下面加上</p>
<p><code>&quot;terminal.integrated.shell.windows&quot;: &quot;C:\\Windows\\sysnative\\bash.exe&quot;,
&quot;terminal.integrated.shellArgs.windows&quot;: [&quot;-c&quot;, &quot;zsh&quot;]
&quot;terminal.integrated.fontFamily&quot;: &quot;Anonymous Pro for Powerline&quot;,</code></p>
<p>如果你用的是Vs code 64bit版本，請改成</p>
<p><code>&quot;terminal.integrated.shell.windows&quot;: &quot;C:\\Windows\\sysnative\\bash.exe&quot;,
&quot;terminal.integrated.shellArgs.windows&quot;: [&quot;-c&quot;, &quot;zsh&quot;]
&quot;terminal.integrated.fontFamily&quot;: &quot;Anonymous Pro for Powerline&quot;,</code></p>
<p>記得要在前面加上逗號哦！不過後來我發現字體還是有點怪怪的，便移除了最後一行fontFamily的設定<br>之後在你的文件下，按Ctrl+`就能開啟你文件目錄下的Terminal了！</p>
<h1 id="設定自己喜歡的主題-2018-01-19"><a href="#設定自己喜歡的主題-2018-01-19" class="headerlink" title="設定自己喜歡的主題(2018/01/19)"></a>設定自己喜歡的主題(2018/01/19)</h1><p>自己用了一段時期，發現BUllet Train的顏色很文青很療愈，就沒有換主題了XD 在這邊分享一下踩坑經過：<br><a href="https://github.com/caiogondim/bullet-train.zsh/issues/252" target="_blank" rel="noopener">https://github.com/caiogondim/bullet-train.zsh/issues/252</a><br>基本上設定完後，發現自己Terminal的背景怪怪的，原來是還要加上一些設定，在.zshrc要加上這個：</p>
<pre><code>BULLETTRAIN_CONTEXT_BG=red
</code></pre><p>顏色隨你喜歡，儲存後就大功告成了！</p>
<h1 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h1><p>如果你遇到Input/output error，個人的建議是，你把Bash刪除再重新安裝<a href="https://github.com/Microsoft/WSL/issues/904" target="_blank" rel="noopener">問題參考鏈接參考鏈接</a></p>
<h1 id="參考連結："><a href="#參考連結：" class="headerlink" title="參考連結："></a>參考連結：</h1><ol>
<li><a href="https://youtu.be/rsaqfyDLzQM?t=1m13s" target="_blank" rel="noopener">https://youtu.be/rsaqfyDLzQM?t=1m13s</a></li>
<li><a href="https://blogs.msdn.microsoft.com/commandline/2016/11/17/do-not-change-linux-files-using-windows-apps-and-tools/" target="_blank" rel="noopener">https://blogs.msdn.microsoft.com/commandline/2016/11/17/do-not-change-linux-files-using-windows-apps-and-tools/</a></li>
<li><a href="https://gist.github.com/evdokimovm/67e4fcd938af98528aa108574626e522#file-bashrc-L5" target="_blank" rel="noopener">https://gist.github.com/evdokimovm/67e4fcd938af98528aa108574626e522#file-bashrc-L5</a></li>
<li><a href="http://www.jianshu.com/p/fe244b1c7737" target="_blank" rel="noopener">http://www.jianshu.com/p/fe244b1c7737</a></li>
<li><a href="https://github.com/robbyrussell/oh-my-zsh/issues/5725" target="_blank" rel="noopener">https://github.com/robbyrussell/oh-my-zsh/issues/5725</a></li>
<li><a href="https://www.jazz321254.com/visual-studio-code-zsh/" target="_blank" rel="noopener">https://www.jazz321254.com/visual-studio-code-zsh/</a></li>
<li><a href="https://www.zhihu.com/question/49284484" target="_blank" rel="noopener">https://www.zhihu.com/question/49284484</a></li>
<li><a href="https://winsmarts.com/run-oh-my-zsh-as-integrated-shell-in-vscode-on-windows-7d69f72bafa3" target="_blank" rel="noopener">https://winsmarts.com/run-oh-my-zsh-as-integrated-shell-in-vscode-on-windows-7d69f72bafa3</a></li>
<li><a href="https://evdokimovm.github.io/windows/zsh/shell/syntax/highlighting/ohmyzsh/hyper/terminal/2017/02/24/how-to-install-zsh-and-oh-my-zsh-on-windows-10.html" target="_blank" rel="noopener">https://evdokimovm.github.io/windows/zsh/shell/syntax/highlighting/ohmyzsh/hyper/terminal/2017/02/24/how-to-install-zsh-and-oh-my-zsh-on-windows-10.html</a></li>
<li><a href="https://github.com/robbyrussell/oh-my-zsh#manual-installation" target="_blank" rel="noopener">https://github.com/robbyrussell/oh-my-zsh#manual-installation</a></li>
<li><a href="http://icarus4.logdown.com/posts/177661-from-bash-to-zsh-setup-tips" target="_blank" rel="noopener">http://icarus4.logdown.com/posts/177661-from-bash-to-zsh-setup-tips</a></li>
<li><a href="https://github.com/Microsoft/WSL/issues/904" target="_blank" rel="noopener">https://github.com/Microsoft/WSL/issues/904</a></li>
</ol>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一頁"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">nereuseng</p>
              <p class="site-description motion-element" itemprop="description">這是我記錄我程式能力成長的地方，目前集中在React, JavaScript等，歡迎來交流！</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">16</span>
                    <span class="site-state-item-name">文章</span>
                  </a>
                </div>
              

              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                    
                      
                    
                    <span class="site-state-item-count">1</span>
                    <span class="site-state-item-name">標籤</span>
                  
                </div>
              
            </nav>
          

          

          

          
          

          
          

          
            
          
          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">nereuseng</span>

  

  
</div>




  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 強力驅動 v3.4.4</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主題 &mdash; <a class="theme-link" target="_blank" href="https://github.com/theme-next/hexo-theme-next">NexT.Muse</a> v6.3.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.3.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.3.0"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.3.0"></script>



  



	





  





  










  





  

  

  

  

  
  

  

  

  

  

  

</body>
</html>
